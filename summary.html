<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Summary | Ngaoyi Cleaning</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#003b6f',
                        'primary-light': '#0056a3',
                        'secondary': '#000000',
                        'accent': '#00c6ff',
                        'light-gray': '#e9ecef'
                    },
                    fontFamily: {
                        'sans': ['Segoe UI', 'Tahoma', 'Geneva', 'Verdana', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
    
    <style>
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="font-sans text-gray-700 bg-white">
    <!-- Navigation -->
    <header class="sticky top-0 z-40 bg-white shadow-md">
        <nav class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-gradient-to-br from-primary to-accent rounded-full overflow-hidden flex items-center justify-center">
                        <img src="https://raw.githubusercontent.com/ngaoyicleaning/ngaoyicleaning/main/assets/logo.png" 
                             alt="Ngaoyi Cleaning Logo" class="w-full h-full object-cover">
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-primary">Ngaoyi Cleaning</h1>
                        <p class="text-sm text-gray-600">Professional Cleaning Services</p>
                    </div>
                </div>
                
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-toggle" class="md:hidden text-primary text-2xl" aria-label="Toggle menu">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </nav>
    </header>

    <main class="py-8">
        <!-- Progress Bar -->
        <div class="container mx-auto px-4 mb-8">
            <div class="flex items-center justify-center">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center font-bold">1</div>
                    <div class="h-1 w-24 bg-primary"></div>
                    <div class="w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center font-bold">2</div>
                    <div class="h-1 w-24 bg-primary"></div>
                    <div class="w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center font-bold">3</div>
                </div>
            </div>
            <div class="flex justify-center mt-2 text-sm">
                <div class="text-gray-500 mr-24">Service Details</div>
                <div class="text-gray-500">Add-ons</div>
                <div class="text-primary font-semibold ml-24">Summary</div>
            </div>
        </div>

        <!-- Summary Section -->
        <section class="py-8">
            <div class="container mx-auto px-4 max-w-4xl">
                <!-- Status Messages -->
                <div id="status-message" class="hidden mb-4"></div>
                
                <h1 class="text-3xl font-bold text-primary mb-2 fade-in">Review Your Booking</h1>
                <p class="text-gray-600 mb-8">Please review all details before proceeding to payment</p>
                
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Left Column: Booking Details -->
                    <div class="md:col-span-2">
                        <div class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-6 fade-in">
                            <!-- Customer Info -->
                            <div class="mb-6">
                                <h2 class="text-xl font-semibold text-primary mb-4 pb-2 border-b">Customer Information</h2>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-sm text-gray-500">Full Name</p>
                                        <p id="summary-name" class="font-semibold"></p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Email</p>
                                        <p id="summary-email" class="font-semibold"></p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Phone</p>
                                        <p id="summary-phone" class="font-semibold"></p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Address</p>
                                        <p id="summary-address" class="font-semibold"></p>
                                    </div>
                                </div>
                            </div>

                            <!-- Service Details -->
                            <div class="mb-6">
                                <h2 class="text-xl font-semibold text-primary mb-4 pb-2 border-b">Service Details</h2>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-sm text-gray-500">Service Type</p>
                                        <p id="summary-service" class="font-semibold"></p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Property Size</p>
                                        <p id="summary-property" class="font-semibold"></p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Materials</p>
                                        <p id="summary-materials" class="font-semibold"></p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Date & Time</p>
                                        <p id="summary-datetime" class="font-semibold"></p>
                                    </div>
                                </div>
                            </div>

                            <!-- Special Instructions -->
                            <div class="mb-6">
                                <h2 class="text-xl font-semibold text-primary mb-4 pb-2 border-b">Special Instructions</h2>
                                <p id="summary-instructions" class="text-gray-700"></p>
                            </div>

                            <!-- Add-ons -->
                            <div id="addons-section">
                                <h2 class="text-xl font-semibold text-primary mb-4 pb-2 border-b">Add-on Services</h2>
                                <div id="addons-list" class="space-y-2">
                                    <!-- Will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Edit Buttons -->
                        <div class="flex space-x-4">
                            <a href="/booking.html" class="text-primary font-semibold hover:text-accent flex items-center">
                                <i class="fas fa-edit mr-2"></i> Edit Service Details
                            </a>
                            <a href="/booking-addons.html" class="text-primary font-semibold hover:text-accent flex items-center">
                                <i class="fas fa-edit mr-2"></i> Edit Add-ons
                            </a>
                        </div>
                    </div>

                    <!-- Right Column: Price Summary & Payment -->
                    <div>
                        <div class="bg-white rounded-xl shadow-lg p-6 sticky top-24 fade-in">
                            <h2 class="text-xl font-semibold text-primary mb-4">Price Summary</h2>
                            
                            <div class="space-y-3 mb-6">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Base Service:</span>
                                    <span id="price-base" class="font-semibold"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Materials:</span>
                                    <span id="price-materials" class="font-semibold"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Emergency Surcharge:</span>
                                    <span id="price-emergency" class="font-semibold">R 0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Add-ons:</span>
                                    <span id="price-addons" class="font-semibold">R 0</span>
                                </div>
                                
                                <!-- Discount Field -->
                                <div class="border-t pt-3 mt-3">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-gray-600">Discount Code:</span>
                                        <button id="apply-discount" class="text-sm text-primary font-semibold hover:text-accent">Apply</button>
                                    </div>
                                    <input type="text" id="discount-code" 
                                           class="w-full px-3 py-2 border border-gray-300 rounded text-sm mb-2"
                                           placeholder="Enter discount code">
                                    <div id="discount-message" class="text-sm hidden"></div>
                                </div>
                                
                                <div class="border-t pt-3">
                                    <div class="flex justify-between">
                                        <span class="text-gray-700 font-semibold">Subtotal:</span>
                                        <span id="price-subtotal" class="font-semibold"></span>
                                    </div>
                                    <div class="flex justify-between mt-2">
                                        <span class="text-gray-700 font-semibold">Discount:</span>
                                        <span id="price-discount" class="text-green-600 font-semibold">- R 0</span>
                                    </div>
                                    <div class="flex justify-between mt-3 pt-3 border-t">
                                        <span class="text-lg font-bold text-primary">Total:</span>
                                        <span id="price-total" class="text-2xl font-bold text-primary"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- Terms Agreement -->
                            <div class="mb-6">
                                <div class="flex items-start">
                                    <input type="checkbox" id="terms-agree" class="mt-1 mr-2">
                                    <label for="terms-agree" class="text-sm text-gray-600">
                                        I agree to the <a href="https://www.ngaoyicleaning.co.za/terms" target="_blank" class="text-primary hover:text-accent">Terms & Conditions</a> and confirm that I have read the <a href="https://www.ngaoyicleaning.co.za/privacy" target="_blank" class="text-primary hover:text-accent">Privacy Policy</a>.
                                    </label>
                                </div>
                            </div>

                            <!-- Payment Button -->
                            <button id="pay-button"
                                    class="w-full bg-gradient-to-r from-primary to-accent text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed pulse"
                                    disabled>
                                <span id="pay-text">
                                    <i class="fas fa-lock mr-2"></i> Pay Securely Now
                                </span>
                                <span id="pay-loading" class="hidden">
                                    <i class="fas fa-spinner fa-spin mr-2"></i> Processing...
                                </span>
                            </button>

                            <p class="text-center text-gray-500 text-sm mt-4">
                                <i class="fas fa-shield-alt mr-1"></i> Secure payment powered by Yoco
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-black text-white py-8">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <p class="text-gray-400">Need help? Call us at <a href="tel:+27707643709" class="text-accent">070 764 3709</a></p>
                <div class="mt-4">
                    <a href="https://www.ngaoyicleaning.co.za/privacy" target="_blank" class="text-gray-400 hover:text-accent text-sm mx-2">Privacy Policy</a>
                    <a href="https://www.ngaoyicleaning.co.za/terms" target="_blank" class="text-gray-400 hover:text-accent text-sm mx-2">Terms & Conditions</a>
                </div>
                <p class="text-gray-500 text-sm mt-4">&copy; 2024 Ngaoyi Cleaning. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Configuration - REPLACE WITH YOUR ACTUAL GOOGLE APPS SCRIPT URL
        const GAS_ENDPOINT_URL = "https://script.google.com/macros/s/AKfycbzpvhu1KfEfresNdXG7nT-f_bgcYaDHJgI0_S5SL7hsVyFj0XArrKR1ORwEMWEvL5W1/exec";
        
        document.addEventListener('DOMContentLoaded', function() {
            // Load booking data from localStorage
            const bookingData = JSON.parse(localStorage.getItem('ngaoyi_booking_data') || '{}');
            
            // Check if we have booking data
            if (!bookingData.customerName && !bookingData.email) {
                showStatusMessage('No booking data found. Please start a new booking.', 'error');
                setTimeout(() => {
                    window.location.href = '/booking.html';
                }, 3000);
                return;
            }
            
            console.log('Loaded booking data:', bookingData);
            
            // Initialize variables
            let discountAmount = 0;
            let discountPercent = 0;
            let discountCode = '';
            let lineItems = [];
            
            // Service type mapping
            const serviceTypes = {
                'weekly': 'Weekly (Save 15%)',
                'biweekly': 'Bi-weekly (Save 10%)',
                'monthly': 'Monthly (Save 5%)',
                'once_off': 'Once-Off Cleaning',
                'deep_cleaning': 'Deep Cleaning',
                'emergency': 'Emergency Service'
            };
            
            // Time slot mapping
            const timeSlots = {
                'morning': 'Morning (8:00 AM - 12:00 PM)',
                'afternoon': 'Afternoon (1:00 PM - 5:00 PM)',
                'evening': 'Evening (6:00 PM - 9:00 PM)'
            };
            
            // Property size mapping
            const propertySizes = {
                '1-bedroom': '1 Bedroom',
                '2-bedroom': '2 Bedrooms',
                '3-bedroom': '3 Bedrooms',
                '4-bedroom': '4+ Bedrooms'
            };
            
            // Add-on names
            const addonNames = {
                'window_cleaning': 'Window Cleaning',
                'oven_cleaning': 'Oven Cleaning',
                'fridge_cleaning': 'Fridge Cleaning',
                'laundry_service': 'Laundry Service (per hour)',
                'carpet_cleaning': 'Carpet Cleaning',
                'blind_cleaning': 'Blind Cleaning'
            };
            
            // Add-on prices
            const addonPrices = {
                'window_cleaning': 150,
                'oven_cleaning': 180,
                'fridge_cleaning': 100,
                'laundry_service': 80,
                'carpet_cleaning': 200,
                'blind_cleaning': 120
            };
            
            // Populate customer info
            document.getElementById('summary-name').textContent = bookingData.customerName || 'Not provided';
            document.getElementById('summary-email').textContent = bookingData.email || 'Not provided';
            document.getElementById('summary-phone').textContent = bookingData.phone || 'Not provided';
            document.getElementById('summary-address').textContent = bookingData.address || 'Not provided';
            
            // Populate service details
            document.getElementById('summary-service').textContent = serviceTypes[bookingData.serviceType] || 'Not selected';
            document.getElementById('summary-property').textContent = propertySizes[bookingData.propertySize] || bookingData.propertySize || 'Not selected';
            
            // Materials option
            const materialsText = bookingData.materialOption === 'we_supply' ? 'We Supply (+R150)' : 'Customer Supplies';
            document.getElementById('summary-materials').textContent = materialsText;
            
            // Date and time
            const date = bookingData.serviceDate || 'Not selected';
            const timeSlot = timeSlots[bookingData.timeSlot] || 'Morning';
            document.getElementById('summary-datetime').textContent = `${date}, ${timeSlot}`;
            
            // Instructions
            document.getElementById('summary-instructions').textContent = 
                bookingData.notes || 'No special instructions provided.';
            
            // Calculate and display pricing
            calculateAndDisplayPricing(bookingData);
            
            // Discount functionality
            setupDiscountFunctionality();
            
            // Payment functionality
            setupPaymentFunctionality(bookingData);
            
            // Terms agreement toggle
            const termsCheckbox = document.getElementById('terms-agree');
            const payButton = document.getElementById('pay-button');
            
            termsCheckbox.addEventListener('change', function() {
                payButton.disabled = !this.checked;
            });
            
            // Helper functions
            function calculateAndDisplayPricing(data) {
                // This would normally call your pricing calculation function
                // For now, we'll calculate based on the provided data structure
                
                // Get base price from localStorage or calculate
                const basePrice = parseFloat(localStorage.getItem('bookingBasePrice')) || 0;
                const materialsPrice = (data.materialOption === 'we_supply') ? 150 : 0;
                
                // Calculate add-ons total
                let addonsTotal = 0;
                const addons = data.addons || [];
                const addonsList = document.getElementById('addons-list');
                const addonsSection = document.getElementById('addons-section');
                
                // Clear existing addons
                addonsList.innerHTML = '';
                
                // Reset line items
                lineItems = [];
                
                if (addons.length > 0) {
                    addons.forEach(addon => {
                        const price = addonPrices[addon] || 0;
                        if (price > 0) {
                            addonsTotal += price;
                            
                            // Add to addons list display
                            const div = document.createElement('div');
                            div.className = 'flex justify-between items-center';
                            div.innerHTML = `
                                <span class="text-gray-700">${addonNames[addon] || addon}</span>
                                <span class="font-semibold">R ${price}</span>
                            `;
                            addonsList.appendChild(div);
                            
                            // Add to Yoco line items
                            lineItems.push({
                                displayName: addonNames[addon] || addon,
                                quantity: 1,
                                pricingDetails: {
                                    price: price * 100 // Convert to cents
                                },
                                description: addonNames[addon] || addon
                            });
                        }
                    });
                } else {
                    addonsSection.style.display = 'none';
                }
                
                // Calculate emergency surcharge (50% of base)
                let emergencySurcharge = 0;
                if (data.serviceType === 'emergency') {
                    emergencySurcharge = Math.round(basePrice * 0.5);
                }
                
                // Calculate subtotal
                const subtotal = basePrice + materialsPrice + emergencySurcharge + addonsTotal;
                
                // Update display
                document.getElementById('price-base').textContent = `R ${basePrice}`;
                document.getElementById('price-materials').textContent = materialsPrice > 0 ? `R ${materialsPrice}` : 'R 0';
                document.getElementById('price-emergency').textContent = emergencySurcharge > 0 ? `R ${emergencySurcharge}` : 'R 0';
                document.getElementById('price-addons').textContent = `R ${addonsTotal}`;
                document.getElementById('price-subtotal').textContent = `R ${subtotal}`;
                
                // Update total (will be updated when discount is applied)
                updateTotalPrice(subtotal);
                
                // Store for later use
                localStorage.setItem('bookingSubtotal', subtotal);
                localStorage.setItem('bookingBasePrice', basePrice);
                
                // Add main service line item for Yoco
                lineItems.unshift({
                    displayName: serviceTypes[data.serviceType] || 'Cleaning Service',
                    quantity: 1,
                    pricingDetails: {
                        price: basePrice * 100 // Convert to cents
                    },
                    description: `${propertySizes[data.propertySize] || data.propertySize} - ${serviceTypes[data.serviceType] || 'Service'}`
                });
                
                // Add materials line item if needed
                if (materialsPrice > 0) {
                    lineItems.splice(1, 0, {
                        displayName: 'Cleaning Materials',
                        quantity: 1,
                        pricingDetails: {
                            price: materialsPrice * 100
                        },
                        description: 'Professional cleaning materials'
                    });
                }
                
                // Add emergency surcharge if applicable
                if (emergencySurcharge > 0) {
                    lineItems.push({
                        displayName: 'Emergency Service Surcharge',
                        quantity: 1,
                        pricingDetails: {
                            price: emergencySurcharge * 100
                        },
                        description: '50% emergency service surcharge'
                    });
                }
            }
            
            function setupDiscountFunctionality() {
                const discountCodeInput = document.getElementById('discount-code');
                const applyDiscountBtn = document.getElementById('apply-discount');
                const discountMessage = document.getElementById('discount-message');
                
                applyDiscountBtn.addEventListener('click', async function() {
                    const code = discountCodeInput.value.trim().toUpperCase();
                    
                    if (!code) {
                        showDiscountMessage('Please enter a discount code', 'error');
                        return;
                    }
                    
                    // Get current subtotal
                    const subtotal = parseFloat(localStorage.getItem('bookingSubtotal')) || 0;
                    
                    try {
                        // Call Google Apps Script to validate discount
                        const response = await fetch(GAS_ENDPOINT_URL, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                action: 'apply-discount',
                                discountCode: code,
                                subtotal: subtotal
                            })
                        });
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            discountAmount = data.discountAmount;
                            discountPercent = data.discountPercent;
                            discountCode = code;
                            
                            // Update price display
                            document.getElementById('price-discount').textContent = `- R ${discountAmount}`;
                            updateTotalPrice(subtotal);
                            
                            showDiscountMessage(`Discount applied! ${discountPercent}% off (-R ${discountAmount})`, 'success');
                            
                            // Disable discount field
                            discountCodeInput.disabled = true;
                            applyDiscountBtn.disabled = true;
                            applyDiscountBtn.textContent = 'Applied';
                            applyDiscountBtn.classList.add('opacity-50');
                        } else {
                            showDiscountMessage(data.error || 'Invalid discount code', 'error');
                        }
                    } catch (error) {
                        console.error('Discount error:', error);
                        showDiscountMessage('Failed to apply discount. Please try again.', 'error');
                    }
                });
                
                function showDiscountMessage(message, type) {
                    discountMessage.textContent = message;
                    discountMessage.className = 'text-sm ' + (type === 'success' ? 'text-green-600' : 'text-red-600');
                    discountMessage.classList.remove('hidden');
                    
                    setTimeout(() => {
                        discountMessage.classList.add('hidden');
                    }, 5000);
                }
            }
            
            function setupPaymentFunctionality(bookingData) {
                const payButton = document.getElementById('pay-button');
                
                payButton.addEventListener('click', async function() {
                    if (!document.getElementById('terms-agree').checked) {
                        showStatusMessage('Please agree to the Terms & Conditions before proceeding.', 'error');
                        return;
                    }
                    
                    // Show loading state
                    const payText = document.getElementById('pay-text');
                    const payLoading = document.getElementById('pay-loading');
                    payText.classList.add('hidden');
                    payLoading.classList.remove('hidden');
                    payButton.disabled = true;
                    
                    try {
                        // Get current pricing
                        const subtotal = parseFloat(localStorage.getItem('bookingSubtotal')) || 0;
                        const totalAmount = subtotal - discountAmount;
                        
                        // Prepare payment data for Google Apps Script
                        const paymentData = {
                            action: 'create-checkout',
                            customerName: bookingData.customerName,
                            email: bookingData.email,
                            phone: bookingData.phone,
                            address: bookingData.address,
                            serviceDate: bookingData.serviceDate,
                            timeSlot: bookingData.timeSlot || 'morning',
                            serviceType: bookingData.serviceType,
                            propertySize: bookingData.propertySize,
                            materialOption: bookingData.materialOption,
                            addons: bookingData.addons || [],
                            notes: bookingData.notes || '',
                            discountCode: discountCode,
                            totalAmount: totalAmount
                        };
                        
                        console.log('Sending payment data:', paymentData);
                        
                        // Send to Google Apps Script
                        const response = await fetch(GAS_ENDPOINT_URL, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(paymentData)
                        });
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            showStatusMessage('Payment processed successfully! Redirecting to Yoco checkout...', 'success');
                            
                            // Store booking reference
                            if (data.bookingRef) {
                                localStorage.setItem('lastBookingRef', data.bookingRef);
                            }
                            
                            // Clear booking data
                            localStorage.removeItem('ngaoyi_booking_data');
                            localStorage.removeItem('bookingSubtotal');
                            localStorage.removeItem('bookingBasePrice');
                            
                            // Redirect to Yoco checkout
                            setTimeout(() => {
                                window.location.href = data.checkoutUrl;
                            }, 2000);
                            
                        } else {
                            throw new Error(data.error || 'Payment processing failed');
                        }
                        
                    } catch (error) {
                        console.error('Payment error:', error);
                        showStatusMessage('Error processing payment: ' + error.message, 'error');
                        
                        // Reset button
                        payText.classList.remove('hidden');
                        payLoading.classList.add('hidden');
                        payButton.disabled = false;
                    }
                });
            }
            
            function updateTotalPrice(subtotal) {
                const total = subtotal - discountAmount;
                document.getElementById('price-total').textContent = `R ${total}`;
            }
            
            function showStatusMessage(message, type) {
                const statusDiv = document.getElementById('status-message');
                statusDiv.textContent = message;
                statusDiv.className = type === 'success' 
                    ? 'bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative' 
                    : 'bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative';
                statusDiv.classList.remove('hidden');
                
                // Auto-hide after 5 seconds for success messages
                if (type === 'success') {
                    setTimeout(() => {
                        statusDiv.classList.add('hidden');
                    }, 5000);
                }
            }
        });
    </script>
</body>
</html>
